Papacica Elena-Daniela
323CB


								Protocoale de comunicatii - Tema 2



	Am pornit de la scheletul din laboratorul 8 pentru server si client pe care l-am adaptat
pentru obiectivele temei.


	La inceput inaintea stabilirii conexiunilor, ii creez serverului o baza de date cu toate
informatiile legate de conturile clientilor (citesc toate informatiile din users_data_file).
Folosesc un vector de structuri (TUser) pentru stocarea acestor informatii.

Apoi, dupa stabilirea conexiunilor cu clientii, parsez comanda primita de la client (in cazul
in care este o comanda cu mai multe argumente, de exemplu login) si o interpretez.

De asemenea, pastrez evidenta tuturor clientilor astfel:
	- retin TOTI clientii, logati si nelogati inca de la stabilirea conexiunii in vectorul
	all_clients - retin numarul socketului corespunzator

	- retin toti clientii logati prin vectorul users_shortcut. Indicele in vector reprezinta
	socketul prin care comunica si valoarea de la indicele respectiv este indexul din vectorul
	users care este baza de date cu TOATE conturile

	- in structura TUser am cateva campuri suplimentare care ma ajuta sa aflu daca un user este
	blocat sau logat.


Pentru comanda LOGIN pun clientul in evidenta serverului, adica il bifez ca logat si raspund cu
un mesaj corespunzator.
Pentru LOGOUT debifez clientul care initial era logat.
Pentru LISTSOLD afisez soldul curent.
Pentru transfer fac verificarile necesare apoi scad din suma clientului si adaug diferenta in
suma contului spre care se trimite.
Pentru QUIT de la client, notific serverul pentru a deloga clientul si inchid sesiunea
clientului iar pentru QUIT la server notific toti clientii si apoi dau return pentru a parasi
programul.

